# Git и GitHub

## Настройка и инициализация

### Настройка Git
```bash
git config --global user.name "ваше имя или ник латиницей"
git config --global user.email ваша электронная почта
```

### Создание и удаление репозитория
```bash
git init   # Создать новый репозиторий в текущей папке
rm -rf .git  # Удалить репозиторий (удаляет папку .git)
```

### Проверка состояния репозитория
```bash
git status  # Узнать состояние репозитория (название ветки, информация о коммитах)
```

## Работа с файлами

### Отслеживание состояния файлов
```bash
git add <файл>      # Добавить конкретный файл для отслеживания
git add --all       # Добавить все файлы
git add .           # Добавить всю текущую папку
```

### Коммиты
```bash
git commit -m 'Сообщение с информацией об изменениях'  # Выполнить коммит (сохранить версию)
                                                      # Сообщение лучше писать в инфинитиве: "Исправить", "Добавить"
                                                      # Первый коммит принято называть 'Initial commit'
```

### Просмотр коммитов
```bash
git log             # Полный лог коммитов
git log --oneline   # Сокращенный лог
```

## Взаимодействие с удалённым репозиторием

### Клонирование репозитория
```bash
git clone 'URL'  # Клонирует удаленный репозиторий в текущий каталог (локальный и удаленный репозитории автоматически связаны)
```
Fork создаёт полностью независимую копию репозитория в аккаунте GitHub.  
Обычно комбинация Fork + clone используется для внесения изменений в публичные репозитории.  
Если репозиторий приватный или это репозиторий вашей компании, при работе с ним достаточно clone.  

### Связывание локального репозитория с удалённым
```bash
git remote add origin <URL>  # Связывает локальный репозиторий с удалённым
```

### Проверка связи с удалённым репозиторием
```bash
git remote -v  # Проверка, что локальный и удалённый репозитории связаны
```

### Пуш изменений на удалённый репозиторий
```bash
git push -u origin main     # Отправить изменения на удалённый репозиторий (первый раз)
git push                    # Пуш коммитов
git push -u origin <ветка>  # Пуш определённой ветки
```

### Пул изменений с удалённого репозитория
```bash
git pull  # Скачать изменения с удалённого репозитория
```

## Работа с ветками

### Основные команды для работы с ветками
branch — это изолированный поток разработки проекта. В таком потоке можно проверять разные идеи, тестировать новую функциональность и т.д.  

```bash
git branch                        # Посмотреть все ветки проекта
git branch <название_ветки>       # Создать новую ветку
git checkout <название_ветки>     # Переключиться на другую ветку
git checkout -b <название_ветки>  # Создать новую ветку и сразу переключиться на неё
git branch -D <название_ветки>    # Удалить ветку
```

### Сравнение и слияние веток
```bash
git diff <ветка1> <ветка2>  # Показать отличия между ветками
git merge <ветка>           # Выполнить слияние веток (присоединить указанную к текущей)
```

## Pull Requests

### Создание Pull Request на GitHub
1. Перейдите на страницу репозитория, выберите вкладку **Pull requests**.
2. Нажмите на зелёную кнопку **New pull request**.
3. Выберите ветки: ветка «откуда» и ветка «куда».
4. Нажмите на кнопку **Create pull request**.
5. Заполните поля с названием и описанием пул-реквеста, нажмите **Create pull request**.
6. Вы или ваши коллеги можете перейти на вкладку **Files changed** для проведения ревью. По окончании ревью можно посмотреть комментарии и обсудить изменения на вкладке **Pull requests**.
7. Добавьте дополнительные коммиты в ветку — они автоматически попадут в открытый пул-реквест после пуша.
8. Нажмите на кнопку **Merge pull request** — это объединит ветку с вашими изменениями и ветку main.

### Подготовка к Pull Request
```bash
git checkout main                # Перейти в main
git pull                         # Подтянуть новые изменения в main
git checkout my-branch           # Вернуться в рабочую ветку my-branch
git merge main                   # Влить main в новую ветку my-branch
git push -u origin my-branch     # Отправить ветку my-branch в удалённый репозиторий
```

## Управление ошибками и исправление коммитов

Делать это лучше ДО git push данного коммита, иначе перезаписать удаленный коммит можно будет только с помощью `git push --force`,
что может привести к конфликтам, если другие разработчики сделают свои коммиты до ваших изменений.   

### Исправление последнего коммита
```bash
git commit --amend --no-edit  # Сделать правки к последнему коммиту без изменения комментария
git commit --amend -m 'Новое сообщение'  # Изменить комментарий последнего коммита
```

### Откат изменений
```bash
git restore --staged <file>  # Убрать файл из staged (после ошибочного git add не того файла)
git reset --hard <commit>    # Откатить изменения проекта до нужного коммита
git restore <file>           # Откатить изменённый файл до версии последнего коммита
```

### Просмотр отличий
```bash
git diff                    # Показать отличия modified файлов с их последними сохранёнными версиями
git diff --staged           # Показать отличия staged файлов с их последними сохранёнными версиями
git diff <хэш1> <хэш2>      # Показать отличия между коммитами с указанными хэшами
git diff HEAD~1 HEAD        # Отличия между предыдущим и текущим коммитами
git diff HEAD~3 HEAD~2      # Отличия между ЧЕТВЁРТЫМ с конца и ТРЕТЬИМ с конца коммитами
```

## Игнорирование файлов

### Создание .gitignore
```bash
# Файл .gitignore в корне репозитория
# Указываются файлы и каталоги, которые должны быть проигнорированы Git
```

## Генерация и настройка SSH-ключей

### Генерация SSH-ключа
```bash
cd ~
ssh-keygen -t ed25519 -C "Почта, к которой привязан Git"
ls -a ~/.ssh  # Показать созданные ключи (публичный и приватный)
```
В папке C:/Users/user/.ssh созданы два ключа, один публичный - с расширением .pub, а один приватный - без расширений.  
Публичным файлом можно делиться с веб-сайтами или коллегами. Приватный ни в коем случае не передавайте никому!  

На сайте создать новый репозиторий (не обязательно, но желательно с тем же именем, что и локальный)  

### Привязка публичного SSH-ключа к GitHub
```bash
clip < ~/.ssh/id_rsa.pub  # Скопировать ключ в буфер (или cat ~/.ssh/<имя_ключа>.pub)
```

Перейдите на GitHub и выберите пункт Settings в меню аккаунта.  
В меню слева нажмите на пункт SSH and GPG keys.  
В открывшейся вкладке выберите New SSH key.  
В поле Title напишите название ключа (например, Personal key).  
В поле Key type должно быть Authentication Key.  
В поле Key скопируйте ваш ключ из буфера обмена.  
Нажмите на кнопку Add SSH key.  

Проверка правильности ключа:  
```bash
ssh -T git@github.com
```

Зайти в удаленный репозиторий, выбрать тип SSH и скопировать ссылку.  
Перейти в папку локального репозитория и прописать:  
```bash
git remote add origin <скопированный url>	# Связывает репозитории
git remote -v								# Проверка, что репозитории связаны
```

### Отправить изменения на удаленныый репозиторий
```bash
git push -u origin main
```

## Полный процесс управления версиями

1. **Подготовка файлов к коммиту:**
    ```bash
    git add --all
    ```

2. **Проверка статуса изменений:**
    ```bash
    git status
    ```

3. **Выполнение коммита:**
    ```bash
    git commit -m 'Сообщение с информацией об изменениях'
    ```

4. **Пуш коммитов:**
    ```bash
    git push
    ```

5. **Пуш определённой ветки:**
    ```bash
    git push -u origin 'название ветки'
    ```
